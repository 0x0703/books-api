# üìö Books API

REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∞–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Node.js, Express –∏ PostgreSQL.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Node.js** - —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
- **Express.js** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **pg** - –¥—Ä–∞–π–≤–µ—Ä PostgreSQL –¥–ª—è Node.js
- **express-validator** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **dotenv** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **cors** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ CORS

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js >= 16.x
- PostgreSQL >= 12.x

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd books-api
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

1. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL:
```sql
CREATE DATABASE books_db;
```

2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL-—Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã:
```bash
psql -U postgres -d books_db -f database.sql
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–§–∞–π–ª `.env` —É–∂–µ —Å–æ–∑–¥–∞–Ω. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏:

```env
DB_HOST=localhost
DB_PORT=5432
DB_NAME=books_db
DB_USER=postgres
DB_PASSWORD=postgres
PORT=3000
```

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π)
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º
npm start
```

## üì° API Endpoints

### –ë–∞–∑–æ–≤—ã–π URL: `http://localhost:3000`

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± API |
| GET | `/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–µ—Ä–∞ |
| GET | `/api/books` | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–Ω–∏–≥–∏ |
| GET | `/api/books/search?q=query` | –ü–æ–∏—Å–∫ –∫–Ω–∏–≥ |
| GET | `/api/books/:id` | –ü–æ–ª—É—á–∏—Ç—å –∫–Ω–∏–≥—É –ø–æ ID |
| POST | `/api/books` | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–Ω–∏–≥—É |
| PUT | `/api/books/:id` | –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–∏–≥—É –ø–æ–ª–Ω–æ—Å—Ç—å—é |
| PATCH | `/api/books/:id` | –ß–∞—Å—Ç–∏—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–Ω–∏–≥—É |
| DELETE | `/api/books/:id` | –£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É |

### Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è GET /api/books

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|-----|----------|--------------|
| page | number | –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã | 1 |
| limit | number | –ó–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–º–∞–∫—Å. 100) | 10 |
| sortBy | string | –ü–æ–ª–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ | created_at |
| sortOrder | string | ASC –∏–ª–∏ DESC | DESC |
| genre | string | –§–∏–ª—å—Ç—Ä –ø–æ –∂–∞–Ω—Ä—É | - |
| author | string | –§–∏–ª—å—Ç—Ä –ø–æ –∞–≤—Ç–æ—Ä—É | - |
| inStock | boolean | –§–∏–ª—å—Ç—Ä –ø–æ –Ω–∞–ª–∏—á–∏—é | - |

## üìù –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (Postman/curl)

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥–∏

```bash
curl -X POST http://localhost:3000/api/books \
  -H "Content-Type: application/json" \
  -d '{
    "title": "–ï–≤–≥–µ–Ω–∏–π –û–Ω–µ–≥–∏–Ω",
    "author": "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü—É—à–∫–∏–Ω",
    "isbn": "978-5-17-090000-6",
    "publication_year": 1833,
    "genre": "–†–æ–º–∞–Ω –≤ —Å—Ç–∏—Ö–∞—Ö",
    "pages": 224,
    "description": "–†–æ–º–∞–Ω –≤ —Å—Ç–∏—Ö–∞—Ö –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –°–µ—Ä–≥–µ–µ–≤–∏—á–∞ –ü—É—à–∫–∏–Ω–∞",
    "price": 299.00,
    "in_stock": true
  }'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–Ω–∏–≥ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

```bash
curl "http://localhost:3000/api/books?page=1&limit=5&sortBy=title&sortOrder=ASC"
```

### –ü–æ–∏—Å–∫ –∫–Ω–∏–≥

```bash
curl "http://localhost:3000/api/books/search?q=–¢–æ–ª—Å—Ç–æ–π"
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–Ω–∏–≥–∏ –ø–æ ID

```bash
curl http://localhost:3000/api/books/1
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏

```bash
curl -X PUT http://localhost:3000/api/books/1 \
  -H "Content-Type: application/json" \
  -d '{
    "price": 899.00,
    "in_stock": false
  }'
```

### –£–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏

```bash
curl -X DELETE http://localhost:3000/api/books/1
```

## üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã books

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | SERIAL | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| title | VARCHAR(255) | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) |
| author | VARCHAR(255) | –ê–≤—Ç–æ—Ä (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) |
| isbn | VARCHAR(20) | ISBN (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π) |
| publication_year | INTEGER | –ì–æ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ |
| genre | VARCHAR(100) | –ñ–∞–Ω—Ä |
| pages | INTEGER | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü |
| description | TEXT | –û–ø–∏—Å–∞–Ω–∏–µ |
| price | DECIMAL(10,2) | –¶–µ–Ω–∞ |
| in_stock | BOOLEAN | –í –Ω–∞–ª–∏—á–∏–∏ |
| created_at | TIMESTAMP | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| updated_at | TIMESTAMP | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

## üîí –í–∞–ª–∏–¥–∞—Ü–∏—è

- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: `title`, `author`
- ISBN: 10-20 —Å–∏–º–≤–æ–ª–æ–≤, —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã, –¥–µ—Ñ–∏—Å—ã –∏ X
- –ì–æ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: 1000 - —Ç–µ–∫—É—â–∏–π –≥–æ–¥ + 1
- –°—Ç—Ä–∞–Ω–∏—Ü—ã: 1 - 50000
- –¶–µ–Ω–∞: 0 - 1000000

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
books-api/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.js      # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errorHandler.js  # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validation.js    # –í–∞–ª–∏–¥–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Book.js          # –ú–æ–¥–µ–ª—å –∫–Ω–∏–≥–∏
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ books.js         # –ú–∞—Ä—à—Ä—É—Ç—ã API
‚îÇ   ‚îî‚îÄ‚îÄ index.js             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ .env                     # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ database.sql             # SQL-—Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ README.md
```

